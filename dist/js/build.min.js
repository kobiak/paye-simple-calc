function myCalc(){$("#yourIncome").remove();var e=$("#income").val(),r=$("input:radio[class=kiwiSaver]:checked").val(),t=$("input:radio[class=studentLoan]:checked").val(),a=0;if(""!=e)if(isNaN(e))$(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("your income should be a number");else{isNaN(e)||$(".error-message").hide();var a=0,o=e*r,n=0;if(e>19084)n=(e-19084)*t;e>70001?a=e-(.33*(e-7e4)+6600+5950+1470)-.0145*e-o-n:e>48001?a=e-(.3*(e-48e3)+5950+1470)-.0145*e-o-n:e>=14001?a=e-.175*(e-14e3)-1470-.0145*e-o-n:e<14001&&(a=e-.105*e-.0145*e-o-n);var l=(e-(a=a.toFixed(2))-.0145*e-o).toFixed(2),i=(.0145*e).toFixed(2);$("#grossIncome").html(e),$("#taxAmount").html(l),$("#accAmount").html(i),$(".netIncome").html(a),$(".perMonth").html(a/12),$(".perWeek").html(a/52);$("#grossIncomeMin").html(29640),$("#taxAmountMin").html(4207),$("#accAmountMin").html(429.78),$("#resultMin").html(25403.22),$("#grossIncomeAvr").html(51532),$("#taxAmountAvr").html(8479.6),$("#accAmountAvr").html(747.21),$("#resultAvr").html(42305.19),$("#grossIncomeMed").html(44876),$("#taxAmountMed").html(6873.3),$("#accAmountMed").html(650.7),$("#resultMed").html(37352),$(".hide").removeClass("hide");var s=[{value:a,color:"#5BBD84",label:"You take home"},{value:l,color:"#F7C474",label:"Tax you pay"},{value:i,color:"#FCA268",label:"ACC you pay"},{value:o,color:"#c0392b",label:"KiwiSaver"},{value:n,color:"#8e44ad",label:"Student Loan"}],c={percentageInnerCutout:70,animationEasing:"easeInOutQuart",tooltipFontSize:18,tooltipTemplate:"<%if (label){%><%=label%>: <%}%>$<%= value %>"};$(".chartBox").append('<canvas id="yourIncome" width="300" height="300">123</canvas><div id="chartSum" class="currency big-number-gross"></div>'),$("#chartSum").html(e);var m=document.getElementById("yourIncome").getContext("2d");new Chart(m).Doughnut(s,c),$(".kiwiSaverResults").html(o.toFixed(2)),$(".studentLoanResults").html(n.toFixed(2)),$(".currency").formatCurrency()}else $(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("please specify your income")}!function(e){function r(r){var t=e.formatCurrency.regions[r];if(t)return t;if(/(\w+)-(\w+)/g.test(r)){var a=r.replace(/(\w+)-(\w+)/g,"$1");return e.formatCurrency.regions[a]}return null}function t(e){switch(e.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}function a(e){if(""===e.symbol)return new RegExp("[^\\d"+e.decimalSymbol+"-]","g");var r=e.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(r+"|[^\\d"+e.decimalSymbol+"-]","g")}e.formatCurrency={},e.formatCurrency.regions=[],e.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},e.fn.formatCurrency=function(t,o){1==arguments.length&&"string"!=typeof t&&(o=t,t=!1);var n={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return n=e.extend(n,e.formatCurrency.regions[""]),(o=e.extend(n,o)).region.length>0&&(o=e.extend(o,r(o.region))),o.regex=a(o),this.each(function(){$this=e(this);var r="0";if((r=$this[$this.is("input, select, textarea")?"val":"html"]()).search("\\(")>=0&&(r="-"+r),""!==r&&("-"!==r||-1!==o.roundToDecimalPlace)){if(isNaN(r)){if(""===(r=r.replace(o.regex,""))||"-"===r&&-1===o.roundToDecimalPlace)return;"."!=o.decimalSymbol&&(r=r.replace(o.decimalSymbol,".")),isNaN(r)&&(r="0")}var a=String(r).split("."),n=r==Math.abs(r),l=a.length>1,i=l?a[1].toString():"0",s=i;if(r=Math.abs(a[0]),r=isNaN(r)?0:r,o.roundToDecimalPlace>=0&&("2"==(i=(i=parseFloat("1."+i)).toFixed(o.roundToDecimalPlace)).substring(0,1)&&(r=Number(r)+1),i=i.substring(2)),r=String(r),o.groupDigits)for(var c=0;c<Math.floor((r.length-(1+c))/3);c++)r=r.substring(0,r.length-(4*c+3))+o.digitGroupSymbol+r.substring(r.length-(4*c+3));(l&&-1==o.roundToDecimalPlace||o.roundToDecimalPlace>0)&&(r+=o.decimalSymbol+i);var m=(n?o.positiveFormat:o.negativeFormat).replace(/%s/g,o.symbol);m=m.replace(/%n/g,r);var u=e([]);(u=t?e(t):$this)[u.is("input, select, textarea")?"val":"html"](m),l&&o.eventOnDecimalsEntered&&s.length>o.roundToDecimalPlace&&u.trigger("decimalsEntered",s),o.colorize&&u.css("color",n?"black":"red")}})},e.fn.toNumber=function(t){var o=e.extend({name:"toNumber",region:"",global:!0},e.formatCurrency.regions[""]);return(t=jQuery.extend(o,t)).region.length>0&&(t=e.extend(t,r(t.region))),t.regex=a(t),this.each(function(){var r=e(this).is("input, select, textarea")?"val":"html";e(this)[r](e(this)[r]().replace("(","(-").replace(t.regex,""))})},e.fn.asNumber=function(o){var n=e.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},e.formatCurrency.regions[""]);(o=jQuery.extend(n,o)).region.length>0&&(o=e.extend(o,r(o.region))),o.regex=a(o),o.parseType=t(o.parseType);var l=e(this).is("input, select, textarea")?"val":"html",i=e(this)[l]();return i=i||"",i=i.replace("(","(-"),i=i.replace(o.regex,""),o.parse?(0==i.length&&(i="0"),"."!=o.decimalSymbol&&(i=i.replace(o.decimalSymbol,".")),window["parse"+o.parseType](i)):i}}(jQuery);