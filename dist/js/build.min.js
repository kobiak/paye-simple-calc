!function(e){function r(r){var t=e.formatCurrency.regions[r];if(t)return t;if(/(\w+)-(\w+)/g.test(r)){var a=r.replace(/(\w+)-(\w+)/g,"$1");return e.formatCurrency.regions[a]}return null}function t(e){switch(e.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}function a(e){if(""===e.symbol)return new RegExp("[^\\d"+e.decimalSymbol+"-]","g");var r=e.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(r+"|[^\\d"+e.decimalSymbol+"-]","g")}e.formatCurrency={},e.formatCurrency.regions=[],e.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},e.fn.formatCurrency=function(t,n){1==arguments.length&&"string"!=typeof t&&(n=t,t=!1);var o={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return o=e.extend(o,e.formatCurrency.regions[""]),(n=e.extend(o,n)).region.length>0&&(n=e.extend(n,r(n.region))),n.regex=a(n),this.each(function(){$this=e(this);var r="0";if((r=$this[$this.is("input, select, textarea")?"val":"html"]()).search("\\(")>=0&&(r="-"+r),""!==r&&("-"!==r||-1!==n.roundToDecimalPlace)){if(isNaN(r)){if(""===(r=r.replace(n.regex,""))||"-"===r&&-1===n.roundToDecimalPlace)return;"."!=n.decimalSymbol&&(r=r.replace(n.decimalSymbol,".")),isNaN(r)&&(r="0")}var a=String(r).split("."),o=r==Math.abs(r),i=a.length>1,l=i?a[1].toString():"0",s=l;if(r=Math.abs(a[0]),r=isNaN(r)?0:r,n.roundToDecimalPlace>=0&&("2"==(l=(l=parseFloat("1."+l)).toFixed(n.roundToDecimalPlace)).substring(0,1)&&(r=Number(r)+1),l=l.substring(2)),r=String(r),n.groupDigits)for(var c=0;c<Math.floor((r.length-(1+c))/3);c++)r=r.substring(0,r.length-(4*c+3))+n.digitGroupSymbol+r.substring(r.length-(4*c+3));(i&&-1==n.roundToDecimalPlace||n.roundToDecimalPlace>0)&&(r+=n.decimalSymbol+l);var m=(o?n.positiveFormat:n.negativeFormat).replace(/%s/g,n.symbol);m=m.replace(/%n/g,r);var u=e([]);(u=t?e(t):$this)[u.is("input, select, textarea")?"val":"html"](m),i&&n.eventOnDecimalsEntered&&s.length>n.roundToDecimalPlace&&u.trigger("decimalsEntered",s),n.colorize&&u.css("color",o?"black":"red")}})},e.fn.toNumber=function(t){var n=e.extend({name:"toNumber",region:"",global:!0},e.formatCurrency.regions[""]);return(t=jQuery.extend(n,t)).region.length>0&&(t=e.extend(t,r(t.region))),t.regex=a(t),this.each(function(){var r=e(this).is("input, select, textarea")?"val":"html";e(this)[r](e(this)[r]().replace("(","(-").replace(t.regex,""))})},e.fn.asNumber=function(n){var o=e.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},e.formatCurrency.regions[""]);(n=jQuery.extend(o,n)).region.length>0&&(n=e.extend(n,r(n.region))),n.regex=a(n),n.parseType=t(n.parseType);var i=e(this).is("input, select, textarea")?"val":"html",l=e(this)[i]();return l=l||"",l=l.replace("(","(-"),l=l.replace(n.regex,""),n.parse?(0==l.length&&(l="0"),"."!=n.decimalSymbol&&(l=l.replace(n.decimalSymbol,".")),window["parse"+n.parseType](l)):l}}(jQuery),function(e){var r=function(){e("#yourIncome").remove();var r=e("#income").val(),t=e("input:radio[class=kiwiSaver]:checked").val(),a=e("input:radio[class=studentLoan]:checked").val(),n=0;if(""!=r)if(isNaN(r))e(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("your income should be a number");else{isNaN(r)||e(".error-message").hide();var o=(.0139*r).toFixed(2),i=r*t,l=0;r>19084&&(l=(r-19084)*a),r>70001?n=r-(.33*(r-7e4)+6600+5950+1470)-o-i-l:r>48001?n=r-(.3*(r-48e3)+5950+1470)-o-i-l:r>=14001?n=r-.175*(r-14e3)-1470-o-i-l:r<14001&&(n=r-.105*r-o-i-l);var s=(r-(n=n.toFixed(2))-o-i).toFixed(2),c=o;e("#grossIncome").html(r),e("#taxAmount").html(s),e("#accAmount").html(c),e(".netIncome").html(n),e(".perMonth").html(n/12),e(".perWeek").html(n/52);e("#grossIncomeMin").html(29640),e("#taxAmountMin").html(4207),e("#accAmountMin").html(429.78),e("#resultMin").html(25403.22),e("#grossIncomeAvr").html(51532),e("#taxAmountAvr").html(8479.6),e("#accAmountAvr").html(747.21),e("#resultAvr").html(42305.19),e("#grossIncomeMed").html(44876),e("#taxAmountMed").html(6873.3),e("#accAmountMed").html(650.7),e("#resultMed").html(37352),e(".hide").removeClass("hide");var m={datasets:[{data:[n,s,c,i,l],backgroundColor:["#5BBD84","#F7C474","#FCA268","#c0392b","#8e44ad"]}],labels:["You take home","Tax you pay","ACC you pay","KiwiSaver","Student Loan"]};e(".chartBox").append('<canvas id="yourIncome" width="300" height="300">&nbsp;</canvas><div id="chartSum" class="currency big-number-gross"></div>'),e("#chartSum").html(r);var u=e("#yourIncome");new Chart(u,{type:"doughnut",data:m,options:{legend:{display:!1}}}),e(".kiwiSaverResults").html(i.toFixed(2)),e(".studentLoanResults").html(l.toFixed(2)),e(".currency").formatCurrency()}else e(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("please specify your income")};e("body").on("click touch",".js-btn-calc",function(){r()}),e("body").on("submit","#income-form",function(e){e.preventDefault(),r()})}(jQuery);