!function(u){function n(e){var r=u.formatCurrency.regions[e];if(r)return r;if(/(\w+)-(\w+)/g.test(e)){var t=e.replace(/(\w+)-(\w+)/g,"$1");return u.formatCurrency.regions[t]}return null}function o(e){if(""===e.symbol)return new RegExp("[^\\d"+e.decimalSymbol+"-]","g");var r=e.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(r+"|[^\\d"+e.decimalSymbol+"-]","g")}u.formatCurrency={},u.formatCurrency.regions=[],u.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"(%s%n)",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},u.fn.formatCurrency=function(c,m){1==arguments.length&&"string"!=typeof c&&(m=c,c=!1);var e={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return e=u.extend(e,u.formatCurrency.regions[""]),0<(m=u.extend(e,m)).region.length&&(m=u.extend(m,n(m.region))),m.regex=o(m),this.each(function(){$this=u(this);var e="0";if(0<=(e=$this[$this.is("input, select, textarea")?"val":"html"]()).search("\\(")&&(e="-"+e),""!==e&&("-"!==e||-1!==m.roundToDecimalPlace)){if(isNaN(e)){if(""===(e=e.replace(m.regex,""))||"-"===e&&-1===m.roundToDecimalPlace)return;"."!=m.decimalSymbol&&(e=e.replace(m.decimalSymbol,".")),isNaN(e)&&(e="0")}var r=String(e).split("."),t=e==Math.abs(e),a=1<r.length,n=a?r[1].toString():"0",o=n;if(e=Math.abs(r[0]),e=isNaN(e)?0:e,0<=m.roundToDecimalPlace&&("2"==(n=(n=parseFloat("1."+n)).toFixed(m.roundToDecimalPlace)).substring(0,1)&&(e=Number(e)+1),n=n.substring(2)),e=String(e),m.groupDigits)for(var i=0;i<Math.floor((e.length-(1+i))/3);i++)e=e.substring(0,e.length-(4*i+3))+m.digitGroupSymbol+e.substring(e.length-(4*i+3));(a&&-1==m.roundToDecimalPlace||0<m.roundToDecimalPlace)&&(e+=m.decimalSymbol+n);var l=(t?m.positiveFormat:m.negativeFormat).replace(/%s/g,m.symbol);l=l.replace(/%n/g,e);var s=u([]);(s=c?u(c):$this)[s.is("input, select, textarea")?"val":"html"](l),a&&m.eventOnDecimalsEntered&&o.length>m.roundToDecimalPlace&&s.trigger("decimalsEntered",o),m.colorize&&s.css("color",t?"black":"red")}})},u.fn.toNumber=function(r){var e=u.extend({name:"toNumber",region:"",global:!0},u.formatCurrency.regions[""]);return 0<(r=jQuery.extend(e,r)).region.length&&(r=u.extend(r,n(r.region))),r.regex=o(r),this.each(function(){var e=u(this).is("input, select, textarea")?"val":"html";u(this)[e](u(this)[e]().replace("(","(-").replace(r.regex,""))})},u.fn.asNumber=function(e){var r=u.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},u.formatCurrency.regions[""]);0<(e=jQuery.extend(r,e)).region.length&&(e=u.extend(e,n(e.region))),e.regex=o(e),e.parseType=function(e){switch(e.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}(e.parseType);var t=u(this).is("input, select, textarea")?"val":"html",a=u(this)[t]();return a=(a=(a=a||"").replace("(","(-")).replace(e.regex,""),e.parse?(0==a.length&&(a="0"),"."!=e.decimalSymbol&&(a=a.replace(e.decimalSymbol,".")),window["parse"+e.parseType](a)):a}}(jQuery),function(u){var r=function(){u("#yourIncome").remove();var e=u("#income").val(),r=u("input:radio[class=kiwiSaver]:checked").val(),t=u("input:radio[class=studentLoan]:checked").val(),a=0;if(""!=e)if(isNaN(e))u(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("your income should be a number");else{isNaN(e)||u(".error-message").hide();var n=(.0139*e).toFixed(2),o=e*r,i=0;19084<e&&(i=(e-19084)*t),70001<e?a=e-(.33*(e-7e4)+6600+5950+1470)-n-o-i:48001<e?a=e-(.3*(e-48e3)+5950+1470)-n-o-i:14001<=e?a=e-.175*(e-14e3)-1470-n-o-i:e<14001&&(a=e-.105*e-n-o-i);var l=(e-(a=a.toFixed(2))-n-o).toFixed(2),s=n;u("#grossIncome").html(e),u("#taxAmount").html(l),u("#accAmount").html(s),u(".netIncome").html(a),u(".perMonth").html(a/12),u(".perWeek").html(a/52);u("#grossIncomeMin").html(29640),u("#taxAmountMin").html(4207),u("#accAmountMin").html(429.78),u("#resultMin").html(25403.22),u("#grossIncomeAvr").html(51532),u("#taxAmountAvr").html(8479.6),u("#accAmountAvr").html(747.21),u("#resultAvr").html(42305.19),u("#grossIncomeMed").html(44876),u("#taxAmountMed").html(6873.3),u("#accAmountMed").html(650.7),u("#resultMed").html(37352),u(".hide").removeClass("hide");var c={datasets:[{data:[a,l,s,o,i],backgroundColor:["#5BBD84","#F7C474","#FCA268","#c0392b","#8e44ad"]}],labels:["You take home","Tax you pay","ACC you pay","KiwiSaver","Student Loan"]};u(".chartBox").append('<canvas id="yourIncome" width="300" height="300">&nbsp;</canvas><div id="chartSum" class="currency big-number-gross"></div>'),u("#chartSum").html(e);var m=u("#yourIncome");new Chart(m,{type:"doughnut",data:c,options:{legend:{display:!1}}}),u(".kiwiSaverResults").html(o.toFixed(2)),u(".studentLoanResults").html(i.toFixed(2)),u(".currency").formatCurrency()}else u(".error-message").show().addClass("alert bg-danger text-center col-md-6 col-md-offset-3").html("please specify your income")};u("body").on("click touch",".js-btn-calc",function(){r()}),u("body").on("submit","#income-form",function(e){e.preventDefault(),r()})}(jQuery);